meta {
  name: Initiate Workflow
  type: http
  seq: 2
}

post {
  url: {{baseURL}}/api/operations/initiate-workflow
  body: json
  auth: inherit
}

body:json {
  {
    "definitionId": "test_workflow_definition",
    "externalReference": "external_reference",
    "startWorkflow": true,
    "externalReferences": [
      {
        "type": "test_workflow_external_reference_code",
        "value": "test_workflow_external_reference_value"
      }
    ],  
    "attributes": [
      {
        "name": "testWorkflowAttribute",
        "value": "Test Workflow Attribute Value"
      }
    ],
    "interactionLinks": [
      {
        "interactionId": "22222222-2222-2222-2222-222222222222",
        "conversationId": "43W4TKD9RF"
      }
    ],
    "variables": [
      {
        "type": "string",
        "name": "testWorkflowVariable",
        "value": "Test Workflow Variable Value"
      }
    ],  
    "data": "eyJuYW1lIjogInZhbHVlIn0="
  }
}

vars:post-response {
  workflowId: res.body
}

assert {
  res.status: eq 200
}

settings {
  encodeUrl: true
  timeout: 0
}
